<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>mdlink: Linking multiple node modules with a single command - Esteban Sastre</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="mdlink: Linking multiple node modules with a single command" />
<meta property="og:description" content="Introduction As part of the process of working in node.js applications, developers usually use additional libraries and frameworks to ease and speed their development time, and more than often the number of libraries they rely upon is quite high.
It is also not uncommon to need to modify any of those libraries to fix a bug, or fork them to add additional functionality required for the project they are being used in." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/mdlink-linking-multiple-node-modules-with-a-single-command/" />
<meta property="article:published_time" content="2017-12-20T18:59:53+00:00" />
<meta property="article:modified_time" content="2017-12-20T18:59:53+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="mdlink: Linking multiple node modules with a single command"/>
<meta name="twitter:description" content="Introduction As part of the process of working in node.js applications, developers usually use additional libraries and frameworks to ease and speed their development time, and more than often the number of libraries they rely upon is quite high.
It is also not uncommon to need to modify any of those libraries to fix a bug, or fork them to add additional functionality required for the project they are being used in."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" /><link rel="stylesheet" type="text/css" href="/css/dark.css" media="(prefers-color-scheme: dark)" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="/">
				<img src="wizard.png" alt="Esteban Sastre" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="/">Esteban Sastre</a></h1>
	<div class="site-description"><p>Pretty much everything that crosses my mind, thoughts and ramblings</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/fr0gs/" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">20</span>
							<span class="rest">Dec 2017</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">mdlink: Linking multiple node modules with a single command</h1>
				</div>
			</div>
					
			<div class="markdown">
				<h1 id="introduction">Introduction</h1>
<p>As part of the process of working in <strong>node.js</strong> applications, developers usually use additional libraries and frameworks to ease and speed their development time, and more than often the number of libraries they rely upon is quite high.</p>
<p>It is also not uncommon to need to modify any of those libraries to fix a bug, or fork them to add additional functionality required for the project they are being used in.</p>
<p>The usual way to do this in a <strong>node.js</strong> project is:</p>
<ol>
<li>Clone the library's repository in your local machine</li>
<li><code>cd</code> your library's folder.</li>
<li><code>sudo npm link</code> to link the module globally.</li>
<li><code>cd</code> to your project's folder.</li>
<li><code>npm link &lt;library_name&gt;</code> to link to the library.</li>
</ol>
<p>If you have multiple libraries that you need to be linking at the same time, or you have to link a library that depends on another library that you may need to link as well, it can be quite cumbersome to link them one by one.</p>
<p>In my free time I developed <a href="https://www.npmjs.com/package/mdlink">mdlink</a>. It is a small utility that allows to easily <code>npm link</code> multiple node modules in a given project.</p>
<p>It was born as a reaction of my annoyance while I was developing <strong>Ember.js</strong> applications with multiple addons at the same time. Per each addon I'd need to clone it and link it. This tool intends to provide an easy way of bulk <code>npm link</code> and removing those links later while not necessary.</p>
<p>Modules are specified in the <strong>mdlink.config.json</strong> configuration file. e.g:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  &#34;base_modules_path&#34;: <span style="color:#a31515">&#34;~/gits/test&#34;</span>,
  &#34;modules&#34;: {
    &#34;mdlink&#34;: {
      &#34;url&#34;: <span style="color:#a31515">&#34;https://github.com/fr0gs/mdlink&#34;</span>,
      &#34;path&#34;: <span style="color:#a31515">&#34;~/gits/test/mdlink&#34;</span>
    }
  }
}
</code></pre></div><p>Each module to be linked is stated in the <em>modules</em> object. It can have both <em>url</em> &amp; <em>path</em> together, or only one of each.</p>
<p>The <em>base_modules_path</em> is used for the case where there is no <em>path</em> but a <em>url</em> is yet specified. The module will be cloned in <code>base_modules_path/module_name</code> instead.</p>
<p>Let's see an example with a new <strong>Ember</strong> application. First, download <a href="https://www.npmjs.com/package/mdlink">mdlink</a> with <strong>npm</strong> and  create the application:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">test-ember:master* λ sudo npm install -g mdlink
test-ember:master* λ ember new test-ember
</code></pre></div><p>Then, create a new <em>mdlink.config.json</em> file inside the <code>test-ember</code> app.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">test-ember:master* λ mdlink init
</code></pre></div><p>And let's say that in our new application we want to locally modify both <strong>ember-moment</strong> and <strong>ember-promise-helpers</strong>. We modify the <em>mdlink.config.json</em> file like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  &#34;base_modules_path&#34;: <span style="color:#a31515">&#34;/home/esteban/gits/test&#34;</span>,
  &#34;modules&#34;: {
    &#34;ember-moment&#34;: {
      &#34;url&#34;: <span style="color:#a31515">&#34;https://github.com/stefanpenner/ember-moment&#34;</span>,
      &#34;path&#34;: <span style="color:#a31515">&#34;/home/esteban/gits/test/ember-moment&#34;</span>
    },
    &#34;ember-promise-helpers&#34;: {
      &#34;url&#34;: <span style="color:#a31515">&#34;https://github.com/fivetanley/ember-promise-helpers.git&#34;</span>,
      &#34;path&#34;: <span style="color:#a31515">&#34;/home/esteban/gits/test/ember-promise-helpers&#34;</span>
    }
  }
}
</code></pre></div><p>Do the linking:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">test-ember:master* λ mdlink s
[+] Path /home/esteban/gits/test-ember/node_modules/ember-moment already exists, removing it.
[+] &lt;path exists&gt; . Successfully cloned https://github.com/stefanpenner/ember-moment in path: /home/esteban/gits/test/ember-moment
[+] Create link from /usr/lib/node_modules/ember-moment -&gt; /home/esteban/gits/test/ember-moment
-------------------------
[+] &lt;path exists&gt; . Successfully cloned https://github.com/fivetanley/ember-promise-helpers.git in path: /home/esteban/gits/test/ember-promise-helpers
[+] Create link from /usr/lib/node_modules/ember-promise-helpers -&gt; /home/esteban/gits/test/ember-promise-helpers
</code></pre></div><p>Verify both modules where properly cloned:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">test λ ls -la ~/gits/test/
drwxrwxr-x  4 esteban esteban 4,0K Dez 19 22:07 ./
drwxrwxr-x  8 esteban esteban 4,0K Dez 19 22:05 ../
drwxrwxr-x 10 esteban esteban 4,0K Dez 19 22:36 ember-moment/
drwxrwxr-x  9 esteban esteban 4,0K Dez 19 22:07 ember-promise-helpers/
</code></pre></div><p>Modify <em>index.js</em> in both modules, and <code>ember s</code> from the <code>test-ember</code> app folder:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">test-ember:master* λ ember s
Linked ember-moment
Linked ember-promise-helpers
Could not start watchman
Visit https://ember-cli.com/user-guide/#watchman <span style="color:#00f">for</span> more info.
Livereload server on http://localhost:7020

Build successful (14117ms) – Serving on http://localhost:4200/
</code></pre></div><p>Have fun!</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/ember">ember</a></li>
							
							<li><a href="/tags/node">node</a></li>
							
							<li><a href="/tags/nodejs">nodejs</a></li>
							
							<li><a href="/tags/javascript">javascript</a></li>
							
						</ul>
					
				
			</div><div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'ink-demo';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-99848055-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
